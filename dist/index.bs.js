"use strict";var React=require("react"),Core=require("@blueprintjs/core"),ReactDom=require("react-dom");function _interopNamespace(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var t=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,t.get?t:{enumerable:!0,get:function(){return e[n]}})}}),r.default=e,Object.freeze(r)}var React__namespace=_interopNamespace(React),Core__namespace=_interopNamespace(Core),ReactDom__namespace=_interopNamespace(ReactDom);function caml_array_sub(e,r,n){for(var t=new Array(n),a=0,i=r;a<n;)t[a]=e[i],a=a+1|0,i=i+1|0;return t}function len(e,r){for(;;){var n=r,t=e;if(!n)return t;r=n.tl,e=n.hd.length+t|0}}function fill(e,r,n){for(;;){var t=n,a=r;if(!t)return;for(var i=t.hd,c=i.length,u=a,s=0;s<c;)e[u]=i[s],u=u+1|0,s=s+1|0;n=t.tl,r=u}}function caml_array_concat(e){var r=len(0,e),n=new Array(r);return fill(n,0,e),n}function caml_make_vect(e,r){for(var n=new Array(e),t=0;t<e;++t)n[t]=r;return n}function app(e,r){for(;;){var n=r,t=e,a=t.length,i=a===0?1:a,c=n.length,u=i-c|0;if(u===0)return t.apply(null,n);if(u>=0)return function(s,d){return function(v){return app(s,d.concat([v]))}}(t,n);r=caml_array_sub(n,i,-u|0),e=t.apply(null,caml_array_sub(n,0,i))}}function _1(e,r){var n=e.length;if(n===1)return e(r);switch(n){case 1:return e(r);case 2:return function(t){return e(r,t)};case 3:return function(t,a){return e(r,t,a)};case 4:return function(t,a,i){return e(r,t,a,i)};case 5:return function(t,a,i,c){return e(r,t,a,i,c)};case 6:return function(t,a,i,c,u){return e(r,t,a,i,c,u)};case 7:return function(t,a,i,c,u,s){return e(r,t,a,i,c,u,s)};default:return app(e,[r])}}var id={contents:0};function create(e){return id.contents=id.contents+1|0,e+("/"+id.contents)}function caml_is_extension(e){return e==null?!1:typeof e.RE_EXN_ID=="string"}function some(e){return e===void 0?{BS_PRIVATE_NESTED_SOME_NONE:0}:e!==null&&e.BS_PRIVATE_NESTED_SOME_NONE!==void 0?{BS_PRIVATE_NESTED_SOME_NONE:e.BS_PRIVATE_NESTED_SOME_NONE+1|0}:e}function valFromOption(e){if(!(e!==null&&e.BS_PRIVATE_NESTED_SOME_NONE!==void 0))return e;var r=e.BS_PRIVATE_NESTED_SOME_NONE;if(r!==0)return{BS_PRIVATE_NESTED_SOME_NONE:r-1|0}}var $$Error=create("Caml_js_exceptions.Error");function internalToOCamlException(e){return caml_is_extension(e)?e:{RE_EXN_ID:$$Error,_1:e}}function map$1(e,r){var n=r.length;if(n===0)return[];for(var t=caml_make_vect(n,_1(e,r[0])),a=1;a<n;++a)t[a]=_1(e,r[a]);return t}function to_list(e){for(var r=e.length-1|0,n=0;;){var t=n,a=r;if(a<0)return t;n={hd:e[a],tl:t},r=a-1|0}}function list_length(e,r){for(;;){var n=r,t=e;if(!n)return t;r=n.tl,e=t+1|0}}function of_list(e){if(!e)return[];for(var r=caml_make_vect(list_length(0,e),e.hd),n=1,t=e.tl;;){var a=t,i=n;if(!a)return r;r[i]=a.hd,t=a.tl,n=i+1|0}}var concat=caml_array_concat;const isLocalhost=Boolean(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function register(){if(process.env.NODE_ENV==="production"&&"serviceWorker"in navigator){if(new URL(process.env.PUBLIC_URL,window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const r=`${process.env.PUBLIC_URL}/service-worker.js`;isLocalhost?checkValidServiceWorker(r):registerValidSW(r)})}}function registerValidSW(e){navigator.serviceWorker.register(e).then(r=>{r.onupdatefound=()=>{const n=r.installing;n.onstatechange=()=>{n.state==="installed"&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(r=>{console.error("Error during service worker registration:",r)})}function checkValidServiceWorker(e){fetch(e).then(r=>{r.status===404||r.headers.get("content-type").indexOf("javascript")===-1?navigator.serviceWorker.ready.then(n=>{n.unregister().then(()=>{window.location.reload()})}):registerValidSW(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}function registerServiceWorker(e){register()}function intEl(e){return String(e)}function optIntEl(e){return e!==void 0?String(e):null}function textEl(e){return e}function arrayEl(e){return e}var ShouldHaveValidIntValue=create("Utils.ShouldHaveValidIntValue");function optIntOrRaise(e){if(e!==void 0)return e;throw{RE_EXN_ID:ShouldHaveValidIntValue,Error:new Error}}function getValueFromEvent(e){return e.target.value}function optToArrayOrEmpty(e){return e!==void 0?e:of_list(0)}function optStringOrEmpty(e){return e!==void 0?e:""}function caml_create_bytes(e){if(e<0)throw{RE_EXN_ID:"Invalid_argument",_1:"String.create",Error:new Error};for(var r=new Array(e),n=0;n<e;++n)r[n]=0;return r}function caml_blit_bytes(e,r,n,t,a){if(!(a<=0)){if(e===n){if(r<t){for(var i=(e.length-t|0)-1|0,c=a-1|0,u=i>c?c:i,s=u;s>=0;--s)e[t+s|0]=e[r+s|0];return}if(r<=t)return;for(var d=(e.length-r|0)-1|0,v=a-1|0,p=d>v?v:d,h=0;h<=p;++h)e[t+h|0]=e[r+h|0];return}var m=e.length-r|0;if(a<=m){for(var _=0;_<a;++_)n[t+_|0]=e[r+_|0];return}for(var o=0;o<m;++o)n[t+o|0]=e[r+o|0];for(var l=m;l<a;++l)n[t+l|0]=0}}function bytes_to_string(e){var r=e.length,n="",t=r;if(r<=4096&&r===e.length)return String.fromCharCode.apply(null,e);for(var a=0;t>0;){for(var i=t<1024?t:1024,c=new Array(i),u=0;u<i;++u)c[u]=e[u+a|0];n=n+String.fromCharCode.apply(null,c),t=t-i|0,a=a+i|0}return n}function bytes_of_string(e){for(var r=e.length,n=new Array(r),t=0;t<r;++t)n[t]=e.charCodeAt(t);return n}function parse_digit(e){return e>=65?e>=97?e>=123?-1:e-87|0:e>=91?-1:e-55|0:e>57||e<48?-1:e-48|0}function int_of_string_base(e){switch(e){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function parse_sign_and_base(e){var r=1,n=2,t=0,a=e.charCodeAt(t);switch(a){case 43:t=t+1|0;break;case 44:break;case 45:r=-1,t=t+1|0;break}if(e[t]==="0"){var i=e.charCodeAt(t+1|0);if(i>=89)if(i>=111){if(i<121)switch(i){case 111:n=0,t=t+2|0;break;case 117:t=t+2|0;break;case 112:case 113:case 114:case 115:case 116:case 118:case 119:break;case 120:n=1,t=t+2|0;break}}else i===98&&(n=3,t=t+2|0);else if(i!==66){if(i>=79)switch(i){case 79:n=0,t=t+2|0;break;case 85:t=t+2|0;break;case 80:case 81:case 82:case 83:case 84:case 86:case 87:break;case 88:n=1,t=t+2|0;break}}else n=3,t=t+2|0}return[t,r,n]}function caml_int_of_string(e){var r=parse_sign_and_base(e),n=r[0],t=int_of_string_base(r[2]),a=4294967295,i=e.length,c=n<i?e.charCodeAt(n):0,u=parse_digit(c);if(u<0||u>=t)throw{RE_EXN_ID:"Failure",_1:"int_of_string",Error:new Error};var s=function(p,h){for(;;){var m=h,_=p;if(m===i)return _;var o=e.charCodeAt(m);if(o===95){h=m+1|0;continue}var l=parse_digit(o);if(l<0||l>=t)throw{RE_EXN_ID:"Failure",_1:"int_of_string",Error:new Error};var f=t*_+l;if(f>a)throw{RE_EXN_ID:"Failure",_1:"int_of_string",Error:new Error};h=m+1|0,p=f}},d=r[1]*s(u,n+1|0),v=d|0;if(t===10&&d!==v)throw{RE_EXN_ID:"Failure",_1:"int_of_string",Error:new Error};return v}function rev_append(e,r){for(;;){var n=r,t=e;if(!t)return n;r={hd:t.hd,tl:n},e=t.tl}}function find_all(e){return function(r){for(var n=0,t=r;;){var a=t,i=n;if(!a)return rev_append(i,0);var c=a.tl,u=a.hd;if(_1(e,u)){t=c,n={hd:u,tl:i};continue}t=c}}}var filter=find_all;function url$1(e){return"/"}var Home={url:url$1};function url$1$1(e){return"/companies"}var Companies={url:url$1$1};function url$2(e){return"/companies/"+e}var Company={url:url$2};function getRoute(e){if(!e)return 0;if(e.hd!=="companies")return 2;var r=e.tl;return r?r.tl?2:{_0:caml_int_of_string(r.hd)}:1}function safeMakeEvent(e){if(typeof Event=="function")return new Event(e);var r=document.createEvent("Event");return r.initEvent(e,!0,!0),r}function pathParse(e){switch(e){case"":case"/":return 0;default:for(var r=e.slice(1),n=r[r.length-1|0],t=n==="/"?r.slice(0,-1):r,a=t.split("?",2),i=a.length!==2?t:a[0],c=i.split("/").filter(function(p){return p.length!==0}),u=c.length-1|0,s=0;;){var d=s,v=u;if(v<0)return d;s={hd:c[v],tl:d},u=v-1|0}}}function path(e,r){var n=typeof window=="undefined"?void 0:window;return e!==void 0?pathParse(e):n!==void 0?pathParse(n.location.pathname):0}function hash(e){var r=typeof window=="undefined"?void 0:window;if(r===void 0)return"";var n=r.location.hash;switch(n){case"":case"#":return"";default:return n.slice(1)}}function searchParse(e){switch(e){case"":case"?":return"";default:var r=e.split("?",2);return r.length!==2?"":r[1]}}function search(e,r){var n=typeof window=="undefined"?void 0:window;return e!==void 0?searchParse(e):n!==void 0?searchParse(n.location.search):""}function push(e){var r=typeof history=="undefined"?void 0:history,n=typeof window=="undefined"?void 0:window;if(r!==void 0&&n!==void 0){r.pushState(null,"",e),n.dispatchEvent(safeMakeEvent("popstate"));return}}function url(e,r){return{path:path(e),hash:hash(),search:search(e)}}function watchUrl(e){var r=typeof window=="undefined"?void 0:window;if(r===void 0)return function(t){};var n=function(t){return _1(e,url(void 0))};return r.addEventListener("popstate",n),n}function unwatchUrl(e){var r=typeof window=="undefined"?void 0:window;if(r!==void 0){r.removeEventListener("popstate",e);return}}var dangerouslyGetInitialUrl=url,CannotCreateLinkToNotFound=create("Link.CannotCreateLinkToNotFound");function Link(e){var r=e.route,n=e.className,t=e.children,a=function(d){return d.metaKey||d.altKey||d.ctrlKey?!0:d.shiftKey},i=function(d){return d.button===0?!a(d):!1},c;if(typeof r=="number")switch(r){case 0:c=Home.url(void 0);break;case 1:c=Companies.url(void 0);break;case 2:throw{RE_EXN_ID:CannotCreateLinkToNotFound,Error:new Error}}else c=Company.url(r._0);var u=function(d){if(i(d))return d.preventDefault(),push(c)},s={className:optStringOrEmpty(n),href:c,onClick:u};return React__namespace.createElement("a",s,t)}var make$5=Link;function View_home(e){return React__namespace.createElement("div",void 0,React__namespace.createElement("h1",{className:"margin-bottom-xl"},textEl("Home")),React__namespace.createElement("p",void 0,textEl("This is REASONML CRUD example.")),React__namespace.createElement("p",void 0,textEl("Purpose of this project was to study REASONML and find a lean way how to implement common CRUD functionality using simple Company-entity.")))}var make$4=View_home,toasterProps={position:7},toaster=Core__namespace.Toaster(toasterProps);function showError(e){var r={message:e,intent:4,iconName:"warning-sign"};return toaster.show(r)}function encodeRequestMethod(e){if(typeof e!="number")return e._0;switch(e){case 0:return"GET";case 1:return"HEAD";case 2:return"POST";case 3:return"PUT";case 4:return"DELETE";case 5:return"CONNECT";case 6:return"OPTIONS";case 7:return"TRACE";case 8:return"PATCH"}}function encodeReferrerPolicy(e){switch(e){case 0:return"";case 1:return"no-referrer";case 2:return"no-referrer-when-downgrade";case 3:return"same-origin";case 4:return"origin";case 5:return"strict-origin";case 6:return"origin-when-cross-origin";case 7:return"strict-origin-when-cross-origin";case 8:return"unsafe-url"}}function encodeRequestMode(e){switch(e){case 0:return"navigate";case 1:return"same-origin";case 2:return"no-cors";case 3:return"cors"}}function encodeRequestCredentials(e){switch(e){case 0:return"omit";case 1:return"same-origin";case 2:return"include"}}function encodeRequestCache(e){switch(e){case 0:return"default";case 1:return"no-store";case 2:return"reload";case 3:return"no-cache";case 4:return"force-cache";case 5:return"only-if-cached"}}function encodeRequestRedirect(e){switch(e){case 0:return"follow";case 1:return"error";case 2:return"manual"}}function map(e,r){if(r!==void 0)return some(_1(e,valFromOption(r)))}function make$3(e,r,n,t,a,i,c,u,s,d,v,p){var h=a!==void 0?a:0,m=d!==void 0?d:"",_=m,o=map(encodeRequestRedirect,s),l=map(encodeRequestCache,u),f=map(encodeRequestCredentials,c),g=map(encodeRequestMode,i),w=encodeReferrerPolicy(h),y=map(encodeRequestMethod,e);return function(N){var E={};return y!==void 0&&(E.method=valFromOption(y)),r!==void 0&&(E.headers=valFromOption(r)),n!==void 0&&(E.body=valFromOption(n)),t!==void 0&&(E.referrer=valFromOption(t)),w!==void 0&&(E.referrerPolicy=valFromOption(w)),g!==void 0&&(E.mode=valFromOption(g)),f!==void 0&&(E.credentials=valFromOption(f)),l!==void 0&&(E.cache=valFromOption(l)),o!==void 0&&(E.redirect=valFromOption(o)),_!==void 0&&(E.integrity=valFromOption(_)),v!==void 0&&(E.keepalive=valFromOption(v)),p!==void 0&&(E.signal=valFromOption(p)),E}}var RequestInit={make:make$3},defaultHeaders={"Content-Type":"application/json"};function getDefaultHeaders(e){return defaultHeaders}var $$Request={defaultHeaders,getDefaultHeaders},FetchError=create("Common.FetchError");function statusOk(e){return e.ok?Promise.resolve(void 0):Promise.reject({RE_EXN_ID:FetchError,_1:e})}var $$Response={statusOk},apiUrl="/api";function get(e,r){if(r in e)return some(e[r])}function fromList(e){for(var r={},n=e;;){var t=n;if(!t)return r;var a=t.hd;r[a[0]]=a[1],n=t.tl}}function _isInteger(e){return isFinite(e)?Math.floor(e)===e:!1}var DecodeError=create("Json_decode.DecodeError");function $$float(e){if(typeof e=="number")return e;throw{RE_EXN_ID:DecodeError,_1:"Expected number, got "+JSON.stringify(e),Error:new Error}}function $$int(e){var r=$$float(e);if(_isInteger(r))return r;throw{RE_EXN_ID:DecodeError,_1:"Expected integer, got "+JSON.stringify(e),Error:new Error}}function string(e){if(typeof e=="string")return e;throw{RE_EXN_ID:DecodeError,_1:"Expected string, got "+JSON.stringify(e),Error:new Error}}function array(e,r){if(Array.isArray(r)){for(var n=r.length,t=new Array(n),a=0;a<n;++a){var i;try{i=_1(e,r[a])}catch(u){var c=internalToOCamlException(u);throw c.RE_EXN_ID===DecodeError?{RE_EXN_ID:DecodeError,_1:c._1+(`
	in array at index `+String(a)),Error:new Error}:c}t[a]=i}return t}throw{RE_EXN_ID:DecodeError,_1:"Expected array, got "+JSON.stringify(r),Error:new Error}}function field(e,r,n){if(typeof n=="object"&&!Array.isArray(n)&&n!==null){var t=get(n,e);if(t!==void 0)try{return _1(r,valFromOption(t))}catch(i){var a=internalToOCamlException(i);throw a.RE_EXN_ID===DecodeError?{RE_EXN_ID:DecodeError,_1:a._1+(`
	at field '`+(e+"'")),Error:new Error}:a}else throw{RE_EXN_ID:DecodeError,_1:"Expected field '"+e+"'",Error:new Error}}else throw{RE_EXN_ID:DecodeError,_1:"Expected object, got "+JSON.stringify(n),Error:new Error}}function optional(e,r){try{return some(_1(e,r))}catch(t){var n=internalToOCamlException(t);if(n.RE_EXN_ID===DecodeError)return;throw n}}var empty=[];function sub(e,r,n){if(r<0||n<0||r>(e.length-n|0))throw{RE_EXN_ID:"Invalid_argument",_1:"String.sub / Bytes.sub",Error:new Error};var t=caml_create_bytes(n);return caml_blit_bytes(e,r,t,0,n),t}function is_space$1(e){return e>13||e<9?e===32:e!==11}function trim$1(e){for(var r=e.length,n=0;n<r&&is_space$1(e[n]);)n=n+1|0;for(var t=r-1|0;t>=n&&is_space$1(e[t]);)t=t-1|0;return t>=n?sub(e,n,(t-n|0)+1|0):empty}function is_space(e){return e>13||e<9?e===32:e!==11}function trim(e){return e===""||!(is_space(e.charCodeAt(0))||is_space(e.charCodeAt(e.length-1|0)))?e:bytes_to_string(trim$1(bytes_of_string(e)))}var object_=fromList;function company(e){return{id:optional(function(r){return field("id",$$int,r)},e),name:field("name",string,e)}}function company$1(e){var r=e.id;return object_({hd:["id",r!==void 0?r:null],tl:{hd:["name",e.name],tl:0}})}var companiesUrl=""+apiUrl+"/companies";function companyUrl(e){return""+apiUrl+"/companies/"+e}function $$fetch$1(e){return fetch(companyUrl(e)).then(function(r){return r.json()}).then(function(r){return Promise.resolve(company(r))})}function fetchAll(e){return fetch(companiesUrl).then(function(r){return r.json()}).then(function(r){return Promise.resolve(array(company,r))})}function add(e){var r=JSON.stringify(company$1(e)),n=$$Request.getDefaultHeaders(void 0),t=RequestInit.make(2,some(n),some(r),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(companiesUrl,t).then(function(a){return a.json()}).then(function(a){return Promise.resolve(company(a))})}function edit(e){var r=JSON.stringify(company$1(e)),n=$$Request.getDefaultHeaders(void 0),t=RequestInit.make(3,some(n),some(r),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(companyUrl(e.id),t).then($$Response.statusOk)}function remove(e){return fetch(companyUrl(e),RequestInit.make(4,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0)).then($$Response.statusOk)}var Api={baseUrl:apiUrl,companiesUrl,companyUrl,$$fetch:$$fetch$1,fetchAll,add,edit,remove};function append(e,r){return concat({hd:optToArrayOrEmpty(e),tl:{hd:[r],tl:0}})}function replace(e,r){return map$1(function(n){return n.id===r.id?{id:n.id,name:r.name}:n},optToArrayOrEmpty(e))}function removeWithId(e,r){var n=to_list(optToArrayOrEmpty(e)),t=filter(function(a){return optIntOrRaise(a.id)!==r})(n);return of_list(t)}function renderCompany(e){return React__namespace.createElement("div",{className:"margin-left-md"},React__namespace.createElement("p",void 0,React__namespace.createElement("strong",void 0,textEl("ID: ")),optIntEl(e.id)),React__namespace.createElement("p",void 0,React__namespace.createElement("strong",void 0,textEl("Name: ")),textEl(e.name)))}function View_company(e){var r=e.id,n=React__namespace.useReducer(function(c,u){return{company:u._0}},{company:void 0}),t=n[1];React__namespace.useEffect(function(){Api.$$fetch(r).then(function(c){return _1(t,{_0:c}),Promise.resolve(void 0)}).catch(function(c){return showError("Failed to fetch companies! Check network connection!"),Promise.resolve(void 0)})},[]);var a=n[0].company,i=a!==void 0?renderCompany(a):"Loading company";return React__namespace.createElement("div",void 0,React__namespace.createElement("div",{className:"margin-bottom-lg"},React__namespace.createElement(make$5,{route:1,children:textEl("< Back")})),React__namespace.createElement("h1",{className:"pt-running-text"},textEl("Company")),React__namespace.createElement("div",void 0,i))}var make$2=View_company;require("./view_companies.css");function initialState(e){return e!==void 0?{company:e,hasError:!1}:{company:{id:void 0,name:""},hasError:!1}}function View_companies$CompanyDialog(e){var r=e.onSubmit,n=e.onClose,t=e.data,a=React__namespace.useReducer(function(d,v){if(v.TAG!==0)return{company:d.company,hasError:v._0};var p=v._0,h=d.hasError&&trim(p).length===0,m=d.company;return{company:{id:m.id,name:p},hasError:h}},initialState(t)),i=a[1],c=a[0],u=function(d){var v=trim(c.company.name);return v.length!==0?(_1(r,c.company),_1(n,d)):_1(i,{TAG:1,_0:!0})},s=c.hasError?4:0;return React__namespace.createElement("div",{className:"dialog-container"},React__namespace.createElement(Core__namespace.FormGroup,{helperText:c.hasError?textEl("Enter valid company name"):null,inline:!0,intent:s,label:textEl("Name "),labelFor:"company-name-input",requiredLabel:{NAME:"Bool",VAL:!0},required:!0,children:React__namespace.createElement(Core__namespace.InputGroup,{id:"company-name-input",intent:s,onChange:function(d){return _1(i,{TAG:0,_0:getValueFromEvent(d)})},placeholder:"Enter company name...",type:"text",value:c.company.name})}),React__namespace.createElement("div",{className:"dialog-button-container"},React__namespace.createElement(Core__namespace.Button,{onClick:n,children:textEl("Cancel")}),React__namespace.createElement(Core__namespace.Button,{intent:1,onClick:u,children:textEl(t!==void 0?"Edit":"Add")})))}function View_companies(e){var r=React__namespace.useReducer(function(o,l){if(typeof l=="number")return l===0?{companies:o.companies,addDialogOpen:o.addDialogOpen,editCompany:o.editCompany,hasLoadError:!0}:{companies:o.companies,addDialogOpen:!o.addDialogOpen,editCompany:o.editCompany,hasLoadError:o.hasLoadError};switch(l.TAG|0){case 0:return{companies:l._0,addDialogOpen:o.addDialogOpen,editCompany:o.editCompany,hasLoadError:!1};case 1:return{companies:append(o.companies,l._0),addDialogOpen:o.addDialogOpen,editCompany:o.editCompany,hasLoadError:o.hasLoadError};case 2:return{companies:replace(o.companies,l._0),addDialogOpen:o.addDialogOpen,editCompany:o.editCompany,hasLoadError:o.hasLoadError};case 3:return{companies:removeWithId(o.companies,l._0),addDialogOpen:o.addDialogOpen,editCompany:o.editCompany,hasLoadError:o.hasLoadError};case 4:return{companies:o.companies,addDialogOpen:o.addDialogOpen,editCompany:l._0,hasLoadError:o.hasLoadError}}},{companies:void 0,addDialogOpen:!1,editCompany:void 0,hasLoadError:!1}),n=r[1],t=r[0],a=function(o,l,f){return React__namespace.createElement("table",{className:"pt-table pt-striped company-table"},React__namespace.createElement("thead",void 0,React__namespace.createElement("tr",void 0,React__namespace.createElement("th",void 0,textEl("Id")),React__namespace.createElement("th",void 0,textEl("Name")),React__namespace.createElement("th",void 0,React__namespace.createElement("div",{className:"company-remove-icon-header"})))),React__namespace.createElement("tbody",void 0,arrayEl(map$1(function(g){var w=optIntOrRaise(g.id);return React__namespace.createElement("tr",{key:String(w),className:"company-table-row"},React__namespace.createElement("td",void 0,React__namespace.createElement(make$5,{route:{_0:w},children:intEl(w)})),React__namespace.createElement("td",void 0,textEl(g.name)),React__namespace.createElement("td",void 0,React__namespace.createElement("div",{className:"company-icon-container"},React__namespace.createElement("span",{className:"pt-icon-standard pt-icon-edit",title:"Edit",onClick:function(y){return _1(f,g)}}),React__namespace.createElement("span",{className:"pt-icon-standard pt-icon-trash margin-left-md",title:"Remove",onClick:function(y){return _1(l,g)}}))))},o))))},i=function(o){return React__namespace.createElement("div",{className:"align-middle"},React__namespace.createElement(Core__namespace.Spinner,{className:"pt-small"}),React__namespace.createElement("span",{className:"margin-left-md"},textEl("Loading")))},c=function(o,l){Api.fetchAll(void 0).then(function(f){return _1(o,f),Promise.resolve(void 0)}).catch(function(f){return showError("Failed to fetch companies! Check network connection!"),_1(l,void 0),Promise.resolve(void 0)})},u=function(o){return _1(n,1)},s=function(o){return _1(n,{TAG:4,_0:o})},d=function(o){return _1(n,{TAG:4,_0:void 0})},v=function(o){var l=function(g){return _1(n,{TAG:3,_0:g})},f=o.id;if(f!==void 0){Api.remove(f).then(function(g){return _1(l,f),Promise.resolve(void 0)}).catch(function(g){return showError("Failed to delete company! Check network connection!"),Promise.resolve(void 0)});return}else{showError("Internal error! Attempting to remove company without id!");return}},p=function(o){var l=function(f){return _1(n,{TAG:1,_0:f})};Api.add(o).then(function(f){return _1(l,f),Promise.resolve(void 0)}).catch(function(f){return showError("Failed to add company! Check network connection!"),Promise.resolve(void 0)})},h=function(o){var l=function(f){return _1(n,{TAG:2,_0:f})};Api.edit(o).then(function(f){return _1(l,o),Promise.resolve(void 0)}).catch(function(f){return showError("Failed to edit company! Check network connection!"),Promise.resolve(void 0)})},m=t.companies,_=m!==void 0?a(m,v,s):i();return React__namespace.useEffect(function(){c(function(o){return _1(n,{TAG:0,_0:o})},function(o){return _1(n,0)})},[]),t.hasLoadError?React__namespace.createElement("h2",{className:"pt-running-text"},textEl("Error loading companies! Check network connection and reload!")):React__namespace.createElement("div",void 0,React__namespace.createElement("h1",{className:"pt-running-text"},textEl("Companies")),t.companies!==void 0?React__namespace.createElement("div",void 0,React__namespace.createElement(Core__namespace.Button,{onClick:u,children:textEl("Add company")})):null,React__namespace.createElement("div",void 0,_),React__namespace.createElement(Core__namespace.Dialog,{isOpen:t.addDialogOpen,onClose:u,title:textEl("Add new company"),children:React__namespace.createElement(View_companies$CompanyDialog,{onSubmit:p,onClose:u,data:t.editCompany})}),React__namespace.createElement(Core__namespace.Dialog,{isOpen:t.editCompany!==void 0,onClose:d,title:textEl("Edit company"),children:React__namespace.createElement(View_companies$CompanyDialog,{onSubmit:h,onClose:d,data:t.editCompany})}))}var make$1=View_companies;function getPageFromPath(e){var r=getRoute(e);if(typeof r!="number")return React__namespace.createElement(make$2,{id:r._0});switch(r){case 0:return React__namespace.createElement(make$4,{});case 1:return React__namespace.createElement(make$1,{});case 2:return React__namespace.createElement("div",void 0,textEl("Page not found!"))}}function getInitialPage(e){return getPageFromPath(dangerouslyGetInitialUrl(void 0).path)}function init(e){return watchUrl(function(r){return _1(e,getPageFromPath(r.path))})}var destroy=unwatchUrl;require("./app.css");var logo=require("./logo.svg");function App(e){var r=React__namespace.useReducer(function(t,a){return{mainContent:a._0}},{mainContent:getInitialPage()}),n=r[1];return React__namespace.useEffect(function(){var t=init(function(a){return _1(n,{_0:a})});return function(a){return destroy(t)}},[n]),React__namespace.createElement("div",{className:"app"},React__namespace.createElement(Core__namespace.Navbar,{className:"pt-dark",children:null},React__namespace.createElement(Core__namespace.NavbarGroup,{align:0,children:null},React__namespace.createElement(make$5,{route:0,className:"test",children:React__namespace.createElement("img",{className:"app-logo",alt:"logo",src:logo})}),React__namespace.createElement(make$5,{route:0,className:"pt-navbar-heading pt-button pt-minimal",children:textEl("REASONML CRUD EXAMPLE")})),React__namespace.createElement(Core__namespace.NavbarGroup,{align:1,children:null},React__namespace.createElement(make$5,{route:1,className:"pt-button pt-minimal pt-icon-people",children:textEl("Companies")}),React__namespace.createElement(Core__namespace.NavbarDivider,{}),React__namespace.createElement(Core__namespace.Button,{className:"pt-minimal",iconName:"cog"}))),React__namespace.createElement("div",{className:"app-content"},r[0].mainContent))}var make=App;require("./index.css"),registerServiceWorker();var root=document.querySelector("#root");root==null?console.log("Coudn't find #root element to mount the React app."):ReactDom__namespace.render(React__namespace.createElement(make,{}),root);
